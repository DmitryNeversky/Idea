<mat-card>
    <mat-card-content>
        <h1>Редактирование идеи</h1>
        <form [formGroup]="mainForm" (ngSubmit)="update()">
            <mat-form-field appearance="fill">
                <mat-label>Заголовок</mat-label>
                <input matInput [value]="idea.title" formControlName="title">
                <mat-error *ngIf="mainForm.get('title').hasError('required')">заполните поле</mat-error>
                <mat-error *ngIf="mainForm.get('title').hasError('minlength')">
                    минимальная длина {{mainForm.get('title').errors.minlength.requiredLength}} символов
                    (сейчас {{mainForm.get('title').errors.minlength.actualLength}})
                </mat-error>
                <mat-error *ngIf="mainForm.get('title').hasError('maxlength')">
                    максимальная длина {{mainForm.get('title').errors.maxlength.requiredLength}} символов
                    (сейчас {{mainForm.get('title').errors.maxlength.actualLength}})
                </mat-error>
            </mat-form-field>
            <mat-form-field appearance="fill">
                <mat-label>Основная идея</mat-label>
                <textarea matInput [value]="idea.text" formControlName="text"></textarea>
                <mat-error *ngIf="mainForm.get('text').hasError('required')">заполните поле</mat-error>
                <mat-error *ngIf="mainForm.get('text').hasError('minlength')">
                    минимальная длина {{mainForm.get('text').errors.minlength.requiredLength}} символов
                    (сейчас {{mainForm.get('text').errors.minlength.actualLength}})
                </mat-error>
                <mat-error *ngIf="mainForm.get('text').hasError('maxlength')">
                    максимальная длина {{mainForm.get('text').errors.maxlength.requiredLength}} символов
                    (сейчас {{mainForm.get('text').errors.maxlength.actualLength}})
                </mat-error>
            </mat-form-field>
            <app-chips [tags]="idea.tags" (tagsEmitter)="setTags($event)" #chips></app-chips>
            <div class="load-images" fxLayout="row">
                <img fxFlex="24%" src="{{ image }}" *ngFor="let image of imagesLoader.loadImages" class="image mat-elevation-z2"
                     (click)="imagesLoader.removeImage($event)" alt="load.image">
                <img fxFlex="24%" src="{{ uploadPath + image }}" *ngFor="let image of idea.images" class="image mat-elevation-z2"
                     (click)="imagesLoader.remImage($event, image)" alt="load.image">
            </div>
            <div class="form-actions">
                <div class="action">
                    <input type="file" class="add-image-input" (change)="imagesLoader.load($event)" accept="image/*" multiple #addImage>
                    <button type="button" mat-icon-button (click)="addImage.click()">
                        <mat-icon color="warn">add_photo_alternate</mat-icon>
                    </button>
                </div>
                <div class="action">
                    <button type="submit" (click)="chips.emitChips()" mat-button color="primary">готово</button>
                </div>
            </div>
        </form>
    </mat-card-content>
</mat-card>